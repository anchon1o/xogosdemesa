<!doctype html>
<html lang="gl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Ludoteca</title>
  <meta name="theme-color" content="#0b1020" />
  <link rel="stylesheet" href="styles.css?v=1767203860" />
</head>
<body>
  <div class="app">
    <header class="topbar">
      <div class="brand">
        <div class="brand__icon" aria-hidden="true">ğŸ²</div>
        <div class="brand__text">
          <div class="brand__title">Ludoteca</div>
          <div class="brand__subtitle" id="brandSubtitle">ColecciÃ³n</div>
        </div>
      </div>

      <div class="topbar__right">
        <button class="iconbtn" id="btnTheme" title="Tema"><span id="themeIcon">ğŸŒ™</span></button>
        <button class="iconbtn" id="btnEditMode" title="Modo ediciÃ³n (PIN)" disabled>ğŸ“Œ</button>
        <button class="iconbtn" id="btnNew" title="Crear" disabled>ï¼‹</button>
        <button class="iconbtn" id="btnAuth" title="Entrar / SaÃ­r"><span id="authIcon">ğŸ‘¤</span></button>
      </div>
    </header>

    <section class="search">
      <div class="search__box">
        <span aria-hidden="true">ğŸ”</span>
        <input id="q" type="search" placeholder="Buscar por tÃ­tulo, etiquetaâ€¦" />
        <button class="search__clear" id="btnClear" title="Limpar">âœ•</button>
      </div>
      <div class="search__meta" id="meta">Cargandoâ€¦</div>
    </section>

    <section class="filters">
      <div class="chips" id="chips"></div>
      <div class="filters__row">
        <div class="select">
          <label class="select__label">Xogadores</label>
          <select id="players" class="select__control">
            <option value="any">Calquera</option><option value="1">1</option><option value="2">2</option>
            <option value="3">3</option><option value="4">4</option><option value="5+">5+</option>
          </select>
        </div>
        <div class="select">
          <label class="select__label">DuraciÃ³n</label>
          <select id="time" class="select__control">
            <option value="any">Calquera</option>
            <option value="short">â‰¤ 30</option>
            <option value="medium">31â€“90</option>
            <option value="long">> 90</option>
          </select>
        </div>
        <div class="select">
          <label class="select__label">Ordenar</label>
          <select id="sort" class="select__control">
            <option value="name">Nome</option>
            <option value="rating">Nota â˜…</option>
            <option value="plays">Partidas</option>
          </select>
        </div>
      </div>
    </section>

    <main class="gallery">
      <div class="grid" id="grid"></div>
      <div class="empty" id="empty" hidden>
        <div class="empty__emoji">ğŸ§©</div>
        <div class="empty__title">Non hai resultados</div>
        <div class="empty__text">Proba a quitar filtros.</div>
        <button class="btn" id="btnReset" type="button">Restablecer</button>
      </div>
    </main>

    <!-- âœ… Bottom nav con ids para alternar ColecciÃ³n/Wishlist -->
    <nav class="bottomnav" aria-label="NavegaciÃ³n">
      <button class="bottomnav__item bottomnav__item--active" id="navCollection" type="button">
        <span class="bottomnav__icon">ğŸ—‚ï¸</span><span class="bottomnav__label">ColecciÃ³n</span>
      </button>
      <button class="bottomnav__item" id="navWishlist" type="button">
        <span class="bottomnav__icon">â­</span><span class="bottomnav__label">Wishlist</span>
      </button>
      <button class="bottomnav__item" type="button" disabled>
        <span class="bottomnav__icon">ğŸ“’</span><span class="bottomnav__label">Partidas</span>
      </button>
      <button class="bottomnav__item" type="button" disabled>
        <span class="bottomnav__icon">ğŸ²</span><span class="bottomnav__label">Ferramentas</span>
      </button>
    </nav>
  </div>

  <!-- Detail -->
  <div class="detail" id="detail" hidden>
    <div class="detail__top">
      <button class="detail__back" id="detailBack">â† Ludoteca</button>
      <div class="detail__title" id="detailTitle">Ficha</div>
      <button class="detail__kebab" id="detailEditBtn" title="Editar" hidden>âœ</button>
    </div>
    <div class="detail__hero">
      <img id="detailCover" alt="Portada" />
      <div class="detail__heroFade"></div>
    </div>
    <div class="detail__content">
      <div class="tabs">
        <button class="tab tab--on" data-tab="resumo">Resumo</button>
        <button class="tab" data-tab="setup">Setup</button>
        <button class="tab" data-tab="imaxes">Imaxes</button>
        <button class="tab" data-tab="links">LigazÃ³ns</button>
      </div>
      <section class="panel" id="tab-resumo"></section>
      <section class="panel" id="tab-setup" hidden></section>
      <section class="panel" id="tab-imaxes" hidden></section>
      <section class="panel" id="tab-links" hidden></section>

      <!-- âœ… Editor: casillas visibles + campo collection -->
      <section class="panel" id="editor" hidden>
        <div class="form">
          <div class="form__row">
            <div class="field"><label>TÃ­tulo</label><input id="f_title"></div>
            <div class="field"><label>SubtÃ­tulo</label><input id="f_subtitle"></div>
          </div>

          <div class="form__row">
            <div class="field">
              <label>ColecciÃ³n</label>
              <select id="f_collection">
                <option value="own">own (ColecciÃ³n)</option>
                <option value="wishlist">wishlist</option>
              </select>
            </div>
            <div class="field"><label>BGG id</label><input id="f_bgg" type="number"></div>
          </div>

          <div class="form__row">
            <div class="field"><label>Players min</label><input id="f_pmin" type="number"></div>
            <div class="field"><label>Players max</label><input id="f_pmax" type="number"></div>
            <div class="field"><label>Minutos</label><input id="f_minutes" type="number"></div>
          </div>

          <div class="form__row">
            <div class="field"><label>Tags (comas)</label><input id="f_tags"></div>
          </div>

          <div class="form__row">
            <div class="field"><label>Portada URL (opcional)</label><input id="f_cover"></div>
          </div>

          <div class="form__row">
            <div class="field"><label>GalerÃ­a URLs (1 por liÃ±a)</label><textarea id="f_gallery" placeholder="https://..."></textarea></div>
          </div>

          <div class="form__row">
            <div class="field"><label>VÃ­deo</label><input id="f_video" placeholder="https://youtu.be/..."></div>
          </div>

          <div class="form__row">
            <div class="field"><label>Setup (1 por liÃ±a)</label><textarea id="f_setup" placeholder="1) ..."></textarea></div>
          </div>

          <div class="form__row">
            <div class="field"><label>Notas</label><textarea id="f_notes"></textarea></div>
          </div>

          <div class="form__actions">
            <button class="btn" id="btnSave" type="button">Gardar</button>
            <button class="btn btn--ghost" id="btnCancel" type="button">Cancelar</button>
          </div>
          <div class="hint" id="saveHint"></div>
        </div>
      </section>
    </div>
  </div>

  <!-- Auth modal -->
  <div class="modal" id="authModal" hidden>
    <div class="modal__card">
      <div class="modal__title">Entrar</div>
      <div class="modal__text">Email + contrasinal (Supabase Auth)</div>
      <div class="form">
        <div class="field"><label>Email</label><input id="authEmail" type="email"></div>
        <div class="field"><label>Contrasinal</label><input id="authPass" type="password"></div>
        <div class="form__actions">
          <button class="btn" id="btnSignIn" type="button">Sign in</button>
          <button class="btn btn--ghost" id="btnCloseAuth" type="button">Pechar</button>
        </div>
        <div class="hint" id="authHint"></div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="config.js?v=1767203860"></script>
  <script src="app.js?v=1767203860"></script>
</body>
</html>