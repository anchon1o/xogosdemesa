<!doctype html>
<html lang="gl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Ludoteca</title>
  <meta name="theme-color" content="#0b1020" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="app" id="app">
    <header class="topbar">
      <div class="brand">
        <div class="brand__icon" aria-hidden="true">ğŸ²</div>
        <div class="brand__text">
          <div class="brand__title">Ludoteca</div>
          <div class="brand__subtitle">A miÃ±a colecciÃ³n</div>
        </div>
      </div>
      <div class="topbar__right">
        <button class="iconbtn" id="btnTheme" title="Tema"><span id="themeIcon">ğŸŒ™</span></button>
        <button class="iconbtn" id="btnPin" title="Modo ediciÃ³n">ğŸ“Œ</button>
        <button class="iconbtn" id="btnAccount" title="Conta">ğŸ‘¤</button>
      </div>
    </header>

    <section class="search">
      <div class="search__box">
        <span class="search__icon">ğŸ”</span>
        <input id="q" type="search" placeholder="Buscar por tÃ­tulo, etiquetaâ€¦" />
        <button class="search__clear" id="btnClear" title="Limpar">âœ•</button>
      </div>
      <div class="search__meta" id="resultsMeta">Cargandoâ€¦</div>
    </section>

    <section class="filters">
      <div class="chips" id="chips"></div>
      <div class="filters__row">
        <div class="select">
          <label class="select__label" for="players">Xogadores</label>
          <select id="players" class="select__control">
            <option value="any">Calquera</option><option value="1">1</option><option value="2">2</option>
            <option value="3">3</option><option value="4">4</option><option value="5+">5+</option>
          </select>
        </div>
        <div class="select">
          <label class="select__label" for="time">DuraciÃ³n</label>
          <select id="time" class="select__control">
            <option value="any">Calquera</option><option value="short">â‰¤ 30 min</option>
            <option value="medium">31â€“90 min</option><option value="long">> 90 min</option>
          </select>
        </div>
        <div class="select">
          <label class="select__label" for="sort">Ordenar</label>
          <select id="sort" class="select__control">
            <option value="name">Nome Aâ†’Z</option><option value="rating">Nota â˜…</option><option value="plays">Partidas</option>
          </select>
        </div>
      </div>

      <div class="editbar" id="editbar" hidden>
        <button class="btn" id="btnNew" type="button">+ Novo xogo</button>
        <button class="btn" id="btnImport" type="button">Importar JSON</button>
        <input id="fileImport" type="file" accept="application/json" hidden />
        <div class="editbar__hint" id="editHint">Modo ediciÃ³n</div>
      </div>
    </section>

    <main class="gallery">
      <div class="grid" id="grid"></div>
      <div class="empty" id="empty" hidden>
        <div class="empty__emoji">ğŸ§©</div>
        <div class="empty__title">Non hai resultados</div>
        <div class="empty__text">Proba a quitar filtros ou buscar por outra palabra.</div>
        <button class="btn" id="btnReset" type="button">Restablecer</button>
      </div>
    </main>

    <nav class="bottomnav">
      <button class="bottomnav__item bottomnav__item--active" type="button"><span>ğŸ—‚ï¸</span><span>ColecciÃ³n</span></button>
      <button class="bottomnav__item" type="button" disabled><span>â­</span><span>Wishlist</span></button>
      <button class="bottomnav__item" type="button" disabled><span>ğŸ“’</span><span>Partidas</span></button>
      <button class="bottomnav__item" type="button" disabled><span>ğŸ²</span><span>Ferramentas</span></button>
    </nav>
  </div>

  <div class="detail" id="detail" hidden>
    <div class="detail__top">
      <button class="detail__back" id="detailBack" type="button">â† Ludoteca</button>
      <div class="detail__title" id="detailTitle">Ficha</div>
      <button class="detail__kebab" type="button" disabled>â‹¯</button>
    </div>
    <div class="detail__hero">
      <img id="detailCover" alt="Portada" />
      <div class="detail__heroFade"></div>
    </div>
    <div class="detail__content">
      <div class="tabs">
        <button class="tab tab--on" type="button" data-tab="resumo">Resumo</button>
        <button class="tab" type="button" data-tab="setup">Setup</button>
        <button class="tab" type="button" data-tab="imaxes">Imaxes</button>
        <button class="tab" type="button" data-tab="links">LigazÃ³ns</button>
      </div>
      <section class="panel" id="tab-resumo"></section>
      <section class="panel" id="tab-setup" hidden></section>
      <section class="panel" id="tab-imaxes" hidden></section>
      <section class="panel" id="tab-links" hidden></section>

      <div class="panel panel--edit" id="detailEdit" hidden>
        <div class="panel__title">Editar xogo</div>
        <form id="editForm" class="form">
          <div class="form__row"><label>TÃ­tulo</label><input name="title" required /></div>
          <div class="form__row"><label>SubtÃ­tulo</label><input name="subtitle" /></div>
          <div class="form__grid3">
            <div class="form__row"><label>Min xogadores</label><input name="players_min" type="number" min="1" /></div>
            <div class="form__row"><label>MÃ¡x xogadores</label><input name="players_max" type="number" min="1" /></div>
            <div class="form__row"><label>Minutos</label><input name="minutes" type="number" min="0" /></div>
          </div>
          <div class="form__grid2">
            <div class="form__row"><label>BGG id</label><input name="bgg_id" type="number" min="0" /></div>
            <div class="form__row"><label>VÃ­deo como xogar</label><input name="how_to_play_url" placeholder="https://â€¦" /></div>
          </div>
          <div class="form__row"><label>Tags (comas)</label><input name="tags" /></div>
          <div class="form__row"><label>Portada URL (opcional; se baleiro usa BGG)</label><input name="cover_url" /></div>
          <div class="form__row"><label>GalerÃ­a URLs (1 por liÃ±a; sÃ³ ficha)</label><textarea name="gallery_urls"></textarea></div>
          <div class="form__row"><label>Setup rÃ¡pido (1 por liÃ±a)</label><textarea name="setup_quick"></textarea></div>
          <div class="form__row"><label>Notas</label><textarea name="notes"></textarea></div>
          <div class="form__actions">
            <button class="btn" type="submit">Gardar</button>
            <button class="btn btn--ghost" id="btnDelete" type="button">Eliminar</button>
          </div>
          <div class="form__msg" id="editMsg"></div>
        </form>
      </div>
    </div>
  </div>

  <div class="modal" id="auth" hidden>
    <div class="modal__card">
      <div class="modal__title">Entrar</div>
      <div class="modal__text">Preme ğŸ“Œ para editar. Se non estÃ¡s logueado, pedirache login. SÃ³ admin pode editar.</div>
      <form id="loginForm" class="form">
        <div class="form__row"><label>Email</label><input name="email" type="email" required /></div>
        <div class="form__row"><label>Contrasinal</label><input name="password" type="password" required /></div>
        <div class="form__actions">
          <button class="btn" type="submit">Sign in</button>
          <button class="btn btn--ghost" id="loginCancel" type="button">Cancelar</button>
        </div>
        <div class="form__msg" id="loginMsg"></div>
      </form>
      <div class="modal__foot">
        <button class="btn btn--ghost" id="logoutBtn" type="button" hidden>Pechar sesiÃ³n</button>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="config.js"></script>
  <script src="app.js"></script>
</body>
</html>
